{"ast":null,"code":"'use strict';\n\nvar through = require('through2');\n\nvar removeBom = require('remove-bom-buffer');\n\nvar SafeBuffer = require('safe-buffer').Buffer;\n\nfunction removeBomStream() {\n  var completed = false;\n  var buffer = SafeBuffer.alloc(0);\n  return through(onChunk, onFlush);\n\n  function removeAndCleanup(data) {\n    completed = true;\n    buffer = null;\n    return removeBom(data);\n  }\n\n  function onChunk(data, enc, cb) {\n    if (completed) {\n      return cb(null, data);\n    }\n\n    if (data.length >= 7) {\n      return cb(null, removeAndCleanup(data));\n    }\n\n    var bufferLength = buffer.length;\n    var chunkLength = data.length;\n    var totalLength = bufferLength + chunkLength;\n    buffer = SafeBuffer.concat([buffer, data], totalLength);\n\n    if (totalLength >= 7) {\n      return cb(null, removeAndCleanup(buffer));\n    }\n\n    cb();\n  }\n\n  function onFlush(cb) {\n    if (completed || !buffer) {\n      return cb();\n    }\n\n    cb(null, removeAndCleanup(buffer));\n  }\n}\n\nmodule.exports = removeBomStream;","map":{"version":3,"sources":["C:/frontend/node_modules/remove-bom-stream/index.js"],"names":["through","require","removeBom","SafeBuffer","Buffer","removeBomStream","completed","buffer","alloc","onChunk","onFlush","removeAndCleanup","data","enc","cb","length","bufferLength","chunkLength","totalLength","concat","module","exports"],"mappings":"AAAA;;AAEA,IAAIA,OAAO,GAAGC,OAAO,CAAC,UAAD,CAArB;;AACA,IAAIC,SAAS,GAAGD,OAAO,CAAC,mBAAD,CAAvB;;AACA,IAAIE,UAAU,GAAGF,OAAO,CAAC,aAAD,CAAP,CAAuBG,MAAxC;;AAEA,SAASC,eAAT,GAA2B;AACzB,MAAIC,SAAS,GAAG,KAAhB;AACA,MAAIC,MAAM,GAAGJ,UAAU,CAACK,KAAX,CAAiB,CAAjB,CAAb;AAEA,SAAOR,OAAO,CAACS,OAAD,EAAUC,OAAV,CAAd;;AAEA,WAASC,gBAAT,CAA0BC,IAA1B,EAAgC;AAC9BN,IAAAA,SAAS,GAAG,IAAZ;AAEAC,IAAAA,MAAM,GAAG,IAAT;AAEA,WAAOL,SAAS,CAACU,IAAD,CAAhB;AACD;;AAED,WAASH,OAAT,CAAiBG,IAAjB,EAAuBC,GAAvB,EAA4BC,EAA5B,EAAgC;AAC9B,QAAIR,SAAJ,EAAe;AACb,aAAOQ,EAAE,CAAC,IAAD,EAAOF,IAAP,CAAT;AACD;;AAED,QAAIA,IAAI,CAACG,MAAL,IAAe,CAAnB,EAAsB;AACpB,aAAOD,EAAE,CAAC,IAAD,EAAOH,gBAAgB,CAACC,IAAD,CAAvB,CAAT;AACD;;AAED,QAAII,YAAY,GAAGT,MAAM,CAACQ,MAA1B;AACA,QAAIE,WAAW,GAAGL,IAAI,CAACG,MAAvB;AACA,QAAIG,WAAW,GAAGF,YAAY,GAAGC,WAAjC;AAEAV,IAAAA,MAAM,GAAGJ,UAAU,CAACgB,MAAX,CAAkB,CAACZ,MAAD,EAASK,IAAT,CAAlB,EAAkCM,WAAlC,CAAT;;AAEA,QAAIA,WAAW,IAAI,CAAnB,EAAsB;AACpB,aAAOJ,EAAE,CAAC,IAAD,EAAOH,gBAAgB,CAACJ,MAAD,CAAvB,CAAT;AACD;;AACDO,IAAAA,EAAE;AACH;;AAED,WAASJ,OAAT,CAAiBI,EAAjB,EAAqB;AACnB,QAAIR,SAAS,IAAI,CAACC,MAAlB,EAA0B;AACxB,aAAOO,EAAE,EAAT;AACD;;AAEDA,IAAAA,EAAE,CAAC,IAAD,EAAOH,gBAAgB,CAACJ,MAAD,CAAvB,CAAF;AACD;AACF;;AAEDa,MAAM,CAACC,OAAP,GAAiBhB,eAAjB","sourcesContent":["'use strict';\r\n\r\nvar through = require('through2');\r\nvar removeBom = require('remove-bom-buffer');\r\nvar SafeBuffer = require('safe-buffer').Buffer;\r\n\r\nfunction removeBomStream() {\r\n  var completed = false;\r\n  var buffer = SafeBuffer.alloc(0);\r\n\r\n  return through(onChunk, onFlush);\r\n\r\n  function removeAndCleanup(data) {\r\n    completed = true;\r\n\r\n    buffer = null;\r\n\r\n    return removeBom(data);\r\n  }\r\n\r\n  function onChunk(data, enc, cb) {\r\n    if (completed) {\r\n      return cb(null, data);\r\n    }\r\n\r\n    if (data.length >= 7) {\r\n      return cb(null, removeAndCleanup(data));\r\n    }\r\n\r\n    var bufferLength = buffer.length;\r\n    var chunkLength = data.length;\r\n    var totalLength = bufferLength + chunkLength;\r\n\r\n    buffer = SafeBuffer.concat([buffer, data], totalLength);\r\n\r\n    if (totalLength >= 7) {\r\n      return cb(null, removeAndCleanup(buffer));\r\n    }\r\n    cb();\r\n  }\r\n\r\n  function onFlush(cb) {\r\n    if (completed || !buffer) {\r\n      return cb();\r\n    }\r\n\r\n    cb(null, removeAndCleanup(buffer));\r\n  }\r\n}\r\n\r\nmodule.exports = removeBomStream;\r\n"]},"metadata":{},"sourceType":"script"}