{"ast":null,"code":"var util = require('util');\n\nvar PassThrough = require('readable-stream/passthrough');\n\nmodule.exports = {\n  Readable: Readable,\n  Writable: Writable\n};\nutil.inherits(Readable, PassThrough);\nutil.inherits(Writable, PassThrough); // Patch the given method of instance so that the callback\n// is executed once, before the actual method is called the\n// first time.\n\nfunction beforeFirstCall(instance, method, callback) {\n  instance[method] = function () {\n    delete instance[method];\n    callback.apply(this, arguments);\n    return this[method].apply(this, arguments);\n  };\n}\n\nfunction Readable(fn, options) {\n  if (!(this instanceof Readable)) return new Readable(fn, options);\n  PassThrough.call(this, options);\n  beforeFirstCall(this, '_read', function () {\n    var source = fn.call(this, options);\n    var emit = this.emit.bind(this, 'error');\n    source.on('error', emit);\n    source.pipe(this);\n  });\n  this.emit('readable');\n}\n\nfunction Writable(fn, options) {\n  if (!(this instanceof Writable)) return new Writable(fn, options);\n  PassThrough.call(this, options);\n  beforeFirstCall(this, '_write', function () {\n    var destination = fn.call(this, options);\n    var emit = this.emit.bind(this, 'error');\n    destination.on('error', emit);\n    this.pipe(destination);\n  });\n  this.emit('writable');\n}","map":{"version":3,"sources":["C:/frontend/node_modules/lazystream/lib/lazystream.js"],"names":["util","require","PassThrough","module","exports","Readable","Writable","inherits","beforeFirstCall","instance","method","callback","apply","arguments","fn","options","call","source","emit","bind","on","pipe","destination"],"mappings":"AAAA,IAAIA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAAlB;;AACA,IAAIC,WAAW,GAAGD,OAAO,CAAC,6BAAD,CAAzB;;AAEAE,MAAM,CAACC,OAAP,GAAiB;AACfC,EAAAA,QAAQ,EAAEA,QADK;AAEfC,EAAAA,QAAQ,EAAEA;AAFK,CAAjB;AAKAN,IAAI,CAACO,QAAL,CAAcF,QAAd,EAAwBH,WAAxB;AACAF,IAAI,CAACO,QAAL,CAAcD,QAAd,EAAwBJ,WAAxB,E,CAEA;AACA;AACA;;AACA,SAASM,eAAT,CAAyBC,QAAzB,EAAmCC,MAAnC,EAA2CC,QAA3C,EAAqD;AACnDF,EAAAA,QAAQ,CAACC,MAAD,CAAR,GAAmB,YAAW;AAC5B,WAAOD,QAAQ,CAACC,MAAD,CAAf;AACAC,IAAAA,QAAQ,CAACC,KAAT,CAAe,IAAf,EAAqBC,SAArB;AACA,WAAO,KAAKH,MAAL,EAAaE,KAAb,CAAmB,IAAnB,EAAyBC,SAAzB,CAAP;AACD,GAJD;AAKD;;AAED,SAASR,QAAT,CAAkBS,EAAlB,EAAsBC,OAAtB,EAA+B;AAC7B,MAAI,EAAE,gBAAgBV,QAAlB,CAAJ,EACE,OAAO,IAAIA,QAAJ,CAAaS,EAAb,EAAiBC,OAAjB,CAAP;AAEFb,EAAAA,WAAW,CAACc,IAAZ,CAAiB,IAAjB,EAAuBD,OAAvB;AAEAP,EAAAA,eAAe,CAAC,IAAD,EAAO,OAAP,EAAgB,YAAW;AACxC,QAAIS,MAAM,GAAGH,EAAE,CAACE,IAAH,CAAQ,IAAR,EAAcD,OAAd,CAAb;AACA,QAAIG,IAAI,GAAG,KAAKA,IAAL,CAAUC,IAAV,CAAe,IAAf,EAAqB,OAArB,CAAX;AACAF,IAAAA,MAAM,CAACG,EAAP,CAAU,OAAV,EAAmBF,IAAnB;AACAD,IAAAA,MAAM,CAACI,IAAP,CAAY,IAAZ;AACD,GALc,CAAf;AAOA,OAAKH,IAAL,CAAU,UAAV;AACD;;AAED,SAASZ,QAAT,CAAkBQ,EAAlB,EAAsBC,OAAtB,EAA+B;AAC7B,MAAI,EAAE,gBAAgBT,QAAlB,CAAJ,EACE,OAAO,IAAIA,QAAJ,CAAaQ,EAAb,EAAiBC,OAAjB,CAAP;AAEFb,EAAAA,WAAW,CAACc,IAAZ,CAAiB,IAAjB,EAAuBD,OAAvB;AAEAP,EAAAA,eAAe,CAAC,IAAD,EAAO,QAAP,EAAiB,YAAW;AACzC,QAAIc,WAAW,GAAGR,EAAE,CAACE,IAAH,CAAQ,IAAR,EAAcD,OAAd,CAAlB;AACA,QAAIG,IAAI,GAAG,KAAKA,IAAL,CAAUC,IAAV,CAAe,IAAf,EAAqB,OAArB,CAAX;AACAG,IAAAA,WAAW,CAACF,EAAZ,CAAe,OAAf,EAAwBF,IAAxB;AACA,SAAKG,IAAL,CAAUC,WAAV;AACD,GALc,CAAf;AAOA,OAAKJ,IAAL,CAAU,UAAV;AACD","sourcesContent":["var util = require('util');\r\nvar PassThrough = require('readable-stream/passthrough');\r\n\r\nmodule.exports = {\r\n  Readable: Readable,\r\n  Writable: Writable\r\n};\r\n\r\nutil.inherits(Readable, PassThrough);\r\nutil.inherits(Writable, PassThrough);\r\n\r\n// Patch the given method of instance so that the callback\r\n// is executed once, before the actual method is called the\r\n// first time.\r\nfunction beforeFirstCall(instance, method, callback) {\r\n  instance[method] = function() {\r\n    delete instance[method];\r\n    callback.apply(this, arguments);\r\n    return this[method].apply(this, arguments);\r\n  };\r\n}\r\n\r\nfunction Readable(fn, options) {\r\n  if (!(this instanceof Readable))\r\n    return new Readable(fn, options);\r\n\r\n  PassThrough.call(this, options);\r\n\r\n  beforeFirstCall(this, '_read', function() {\r\n    var source = fn.call(this, options);\r\n    var emit = this.emit.bind(this, 'error');\r\n    source.on('error', emit);\r\n    source.pipe(this);\r\n  });\r\n\r\n  this.emit('readable');\r\n}\r\n\r\nfunction Writable(fn, options) {\r\n  if (!(this instanceof Writable))\r\n    return new Writable(fn, options);\r\n\r\n  PassThrough.call(this, options);\r\n\r\n  beforeFirstCall(this, '_write', function() {\r\n    var destination = fn.call(this, options);\r\n    var emit = this.emit.bind(this, 'error');\r\n    destination.on('error', emit);\r\n    this.pipe(destination);\r\n  });\r\n\r\n  this.emit('writable');\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"script"}